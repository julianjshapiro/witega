<!DOCTYPE html>
<html lang="en" data-bs-theme="midnight">
    <head>
        <title>{{ title }}</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" type="text/css" href="../../css/custom.css" />
        <script src="../../bootstrap-4.3.1-dist/js/bootstrap.bundle.min.js"></script>
        <link rel="icon" type="image/x-icon" href="/favicon.ico">
    </head>
    <body>
        <script>
            MathJax = { tex: { inlineMath: [ ['$', '$'], ['\\(', '\\)'] ] } };
        </script>
        <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
        <script type="text/javascript" src="../../node_modules/marked/marked.min.js"></script>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css">
        <div class="sticky-top p-3 bg-primary text-white text-left">
            <img src="../../mini.svg" class="img-fluid" width="50em" fill=white></img>
        </div>
        <div class="container mt-5">
            <div class="row">
                <div class="col-sm-9">
                    <div class="ratio ratio-16x9">
                        <iframe class="embed-responsive-item" src="{{ video_url }}" allowfullscreen></iframe>
                    </div>
                </div>
                <div class="col-sm-3">
                    <h3>{{ title }}</h3>
                    <h6>{{ subject }}: {{ lesson }}</h6>
                    <p>{{ author }}</p>
                </div>
            </div>
            <br>
            <hr>
            <div class="row">
                <div class="col-sm-9" id="main">
                    <p>{{ markdown }}</p>
                </div>
                <div class="col-sm-3 text-break" style="border-left: 1px solid #777" id="sources">
                    <p>{{ sources }}</p>
                </div>
            </div>
        </div>
        <div class="sticky-bottom bg-secondary p-3 d-flex justify-content-between align-items-center">
            <div class="left-buttons">
                <a href="#link" class="btn btn-info" role="button">
                    <span class="bi-arrow-left"></span>
                </a>
            </div>
            <div class="right-buttons">
                <a href="https://github.com/julianjshapiro/witega" class="btn btn-primary" role="button">
                <span class="bi-github"></span>
                </a> &nbsp;&nbsp;&nbsp; <a href="#link" class="btn btn-primary" role="button">
                <span class="bi-gear"></span>
                </a>
            </div>
        </div>
        <script>
        document.addEventListener('DOMContentLoaded', function() { 
            const markdownText = document.getElementById('main').innerText;
            console.log(markdownText);
            const parsedMarkdown = marked.parse(markdownText, {
                gfm: true,
                breaks: false
            });
            document.getElementById('main').innerHTML = parsedMarkdown;
            
            const sources = document.getElementById('sources').innerText;
            console.log(sources);
            const parsedSources = marked.parse(sources, {
                gfm: true,
                breaks: true
            });
            document.getElementById('sources').innerHTML = parsedSources;
        });
        </script>
    </body>
</html>